!function(){angular.module("Controllers",["Sections","Food","OrderRecap"])}(),function(){var e=angular.module("Food",["Services"]);e.controller("FoodCtrl",["$scope","menu",function(e,t){e.foodList=t.getFoodList(e.appstate.section),e.orderFood=function(t){e.appstate.order.addFood({food:t,quantity:1})},e.reduceFood=function(t){e.appstate.order.reduceFood(t)}}])}(),function(){var e=angular.module("OrderRecap",["Services"]);e.controller("OrderCtrl",["$scope",function(e){e.orderContent=e.appstate.order.getContent(),e.removeFood=function(t){console.log(t,"removing!"),e.appstate.order.removeItem(t),e.orderContent=e.appstate.order.getContent()}}])}(),function(){var e=angular.module("RMT",["Services","Controllers","ngTouch"]);e.controller("RMTCtrl",["$scope","waiter","menu",function(e,t,n){e.appstate=function(){var e=[];return{currentView:"table-selection",canGoBack:!1,setView:function(t){e.push(this.currentView),this.currentView=t,this.canGoBack=!0},goBack:function(){e.length&&(this.currentView=e.pop(),0===e.length&&(this.canGoBack=!1))}}}()}]),e.controller("TablesCtrl",["$scope","restaurant","waiter",function(e,t,n){e.selectRoom=function(n){e.appstate.room=n,e.tables=t.getTables(n)},e.selectTable=function(t){e.appstate.table=t,e.appstate.order=n.createOrder(t),e.appstate.setView("sections")},e.rooms=t.getRooms(),e.appstate.room=e.rooms[0],e.tables=t.getTables(e.appstate.room)}])}(),function(){var e=angular.module("Sections",["Services"]);e.controller("SectionsCtrl",["$scope","menu",function(e,t){t.getSections().then(function(t){e.sections=t}),e.selectSection=function(t){e.appstate.section=t,e.appstate.setView("food")}}])}(),function(){var e=angular.module("Menu",[]);e.factory("menu",["$http",function(e){function t(e){var t=new Promise(function(t,o){Papa.parse(e,{download:!0,complete:function(e){var o;$.each(e.data,function(e,t){var r,a=t.length;for(r=0;a>r;r++)t[r]&&t.push(t[r]);if(t.splice(0,a),0!==t.length)if(1==t.length)o=t[0],n[o]=[];else{var u={name:t[0],price:parseFloat(t[1].replace(/,/,"."))};n[o].push(u)}}),t(n)}})});return t}var n={},o=t("/assets/menu/menu_parsable.csv");return{getSections:function(){return o.then(function(e){return Object.getOwnPropertyNames(e)})},getFoodList:function(e){return n[e]}}}])}(),function(){var e=angular.module("Order",[]);e.factory("orderGenerator",function(){var e=function(e){var e=e,t=0,n={};return{getContent:function(){var e=$.map(n,function(e){return[e]});return{content:e,total:t}},getCount:function(){return n.length},addFood:function(o){var r=this.getQuantity(o.food),a={food:o.food,quantity:o.quantity,note:o.note||void 0};r&&(a.quantity=r+1),n[o.food.name]=a,t+=o.quantity*o.food.price,e.busy=!0},reduceFood:function(e){var t=n[e.name]?!0:!1,o=n[e.name].quantity;t&&0!==o&&(n[e.name].quantity-=1)},removeItem:function(e){t-=e.quantity*e.food.price,delete n[e.food.name]},getQuantity:function(e){return n[e.name]?n[e.name].quantity:void 0}}};return{createOrder:function(t){return new e(t)}}})}(),function(){var e=angular.module("Restaurant",[]);e.factory("restaurant",function(){for(var e=[],t=0,n=0;3>n;n+=1){var o={};o.id=n,o.tables=[];for(var r=0;5>r;r+=1)o.tables.push({id:t++});e.push(o)}return{getRooms:function(){return e},getTables:function(t){var n=e.indexOf(t);return-1!=n?e[n].tables:void 0}}})}(),function(){angular.module("Services",["Waiter","Restaurant","Menu"])}(),function(){var e=angular.module("Waiter",["Order"]);e.factory("waiter",["orderGenerator",function(e){var t=[];return{createOrder:function(n){var o=e.createOrder(n);return t.push(o),o},deleteOrder:function(e){var n=t.indexOf(e);t.splice(n,1)},sendOrder:function(e){var t=e.getContent();console.log("foods: ",e.getCount()),console.log("list of foods: ",t)}}}])}();