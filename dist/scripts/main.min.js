!function(){angular.module("Controllers",["Sections","Food","OrderRecap"])}(),function(){var e=angular.module("Food",["Services"]);e.controller("FoodCtrl",["$scope","menu",function(e,t){e.foodList=t.getFoodList(e.appstate.section),e.orderFood=function(t){console.log(t),e.appstate.order.addFood({food:t,quantity:1})},e.reduceFood=function(e){console.log("Would like to reduce ",e),e.name="left"}}])}(),function(){var e=angular.module("OrderRecap",["Services"]);e.controller("OrderCtrl",["$scope",function(e){var t=e.appstate.order.getContent();console.log(t),e.orderItems=t.content,e.total=t.total,e.removeFood=function(e){console.log(e,"removing!")}}])}(),function(){var e=angular.module("RMT",["Services","Controllers"]);e.controller("RMTCtrl",["$scope","waiter","menu",function(e,t,n){e.appstate=function(){var e=[];return{currentView:"table-selection",room:{},setView:function(t){e.push(this.currentView),this.currentView=t},goBack:function(){e.length&&(this.currentView=e.pop())}}}()}]),e.controller("TablesCtrl",["$scope","restaurant","waiter",function(e,t,n){e.selectRoom=function(n){e.appstate.room=n,e.tables=t.getTables(n)},e.selectTable=function(t){e.appstate.table=t,e.appstate.order=n.createOrder(),e.appstate.setView("sections")},e.rooms=t.getRooms(),e.tables=t.getTables(e.appstate.room)}])}(),function(){var e=angular.module("Sections",["Services"]);e.controller("SectionsCtrl",["$scope","menu",function(e,t){t.getSections().then(function(t){e.sections=t}),e.selectSection=function(t){e.appstate.section=t,e.appstate.setView("food")}}])}(),function(){var e=angular.module("Menu",[]);e.factory("menu",["$http",function(e){function t(e){var t=new Promise(function(t,o){Papa.parse(e,{download:!0,complete:function(e){var o;$.each(e.data,function(e,t){var r,a=t.length;for(r=0;a>r;r++)t[r]&&t.push(t[r]);if(t.splice(0,a),0!==t.length)if(1==t.length)o=t[0],n[o]=[];else{var u={name:t[0],price:t[1]};n[o].push(u)}}),t(n)}})});return t}var n={},o=t("/assets/menu/menu_parsable.csv");return{getSections:function(){return o.then(function(e){return Object.getOwnPropertyNames(e)})},getFoodList:function(e){return n[e]}}}])}(),function(){var e=angular.module("Order",[]);e.factory("orderGenerator",function(){var e=function(){var e=0,t={};return{getContent:function(){var n=$.map(t,function(e){return[e]});return{content:n,total:e}},getCount:function(){return t.length},addFood:function(n){var o=this.getQuantity(n.food),r={food:n.food,quantity:n.quantity,note:n.note||void 0};o&&(r.quantity=o+1),t[n.food.name]=r,e+=n.quantity*n.food.price},getQuantity:function(e){return t[e.name]?t[e.name].quantity:void 0}}};return{createOrder:function(){return new e}}})}(),function(){var e=angular.module("Restaurant",[]);e.factory("restaurant",function(){for(var e=[],t=0,n=0;3>n;n+=1){var o={};o.id=n,o.tables=[];for(var r=0;5>r;r+=1)o.tables.push({id:t++});e.push(o)}return{getRooms:function(){return e},getTables:function(t){var n=e.indexOf(t);return-1!=n?e[n].tables:void 0}}})}(),function(){angular.module("Services",["Waiter","Restaurant","Menu"])}(),function(){var e=angular.module("Waiter",["Order"]);e.factory("waiter",["orderGenerator",function(e){var t=[];return{createOrder:function(n){var o=e.createOrder();return t.push(o),o},deleteOrder:function(e){var n=t.indexOf(e);t.splice(n,1)},sendOrder:function(e){var t=e.getContent();console.log("foods: ",e.getCount()),console.log("list of foods: ",t)}}}])}();