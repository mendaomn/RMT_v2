!function(){angular.module("Controllers",["Sections","Food","OrderRecap"])}(),function(){var e=angular.module("Food",["Services"]);e.controller("FoodCtrl",["$scope","menu",function(e,t){e.foodList=t.getFoodList(e.appstate.section),e.orderFood=function(t){e.appstate.order.addFood({food:t,quantity:1})},e.reduceFood=function(t){e.appstate.order.reduceFood(t)}}])}(),function(){var e=angular.module("OrderRecap",["Services"]);e.controller("OrderCtrl",["$scope",function(e){e.orderContent=e.appstate.order.getContent(),e.removeFood=function(t){console.log(t,"removing!"),e.appstate.order.removeItem(t)},e.orderFood=function(t){e.appstate.order.addFood({food:t.food,quantity:1})},e.reduceFood=function(t){e.appstate.order.reduceFood(t.food)},e.showNote=function(t){e.note={visible:!0,item:t},console.log("Please add note :D",t.food.name,t.quantity)},e.saveNote=function(){var t=e.note.item;t.note?t.note=e.note.text:(e.appstate.order.reduceFood(t.food),0===t.quantity&&e.removeFood(t),e.appstate.order.addFood({food:t.food,quantity:1,note:e.note.text})),e.note.visible=!1,console.log(e.appstate.order.getContent())}}])}(),function(){var e=angular.module("RMT",["Services","Controllers","Directives","ngTouch"]);e.controller("RMTCtrl",["$scope","waiter","menu",function(e,t,o){e.appstate=function(){var e=[];return{currentView:"table-selection",canGoBack:!1,setView:function(t){this.currentView!==t&&(e.push(this.currentView),this.currentView=t,this.canGoBack=!0)},goBack:function(){e.length&&(this.currentView=e.pop(),0===e.length&&(this.canGoBack=!1))}}}()}]),e.controller("TablesCtrl",["$scope","restaurant","waiter",function(e,t,o){e.selectRoom=function(o){e.appstate.room=o,e.tables=t.getTables(o)},e.selectTable=function(t){e.appstate.table=t,e.appstate.order=o.createOrder(t),e.appstate.setView("sections")},e.rooms=t.getRooms(),e.appstate.room=e.rooms[0],e.tables=t.getTables(e.appstate.room)}])}(),function(){var e=angular.module("Sections",["Services"]);e.controller("SectionsCtrl",["$scope","menu",function(e,t){t.getSections().then(function(t){e.sections=t}),e.selectSection=function(t){e.appstate.section=t,e.appstate.setView("food")}}])}(),function(){angular.module("Directives",["FoodEntry"])}(),function(){var e=angular.module("FoodEntry",[]);e.directive("foodEntry",function(){return{restrict:"E",transclude:!0,scope:{name:"=",quantity:"=",onplus:"&",onminus:"&",onnote:"&?"},templateUrl:"templates/directives/foodEntry.html",link:function(e,t,o){e.$watch("showQuantity",function(t){t&&!e.quantity&&e.onplus()}),e.clicked=function(){e.onnote?e.showMiddleStep=!0:e.showQuantity=!0}}}})}(),function(){var e=angular.module("Menu",[]);e.factory("menu",["$http",function(e){function t(e){var t=new Promise(function(t,n){Papa.parse(e,{download:!0,complete:function(e){var n;$.each(e.data,function(e,t){var r,a=t.length;for(r=0;a>r;r++)t[r]&&t.push(t[r]);if(t.splice(0,a),0!==t.length)if(1==t.length)n=t[0],o[n]=[];else{var u={name:t[0],price:parseFloat(t[1].replace(/,/,"."))};o[n].push(u)}}),t(o)}})});return t}var o={},n=t("/assets/menu/menu_parsable.csv");return{getSections:function(){return n.then(function(e){return Object.getOwnPropertyNames(e)})},getFoodList:function(e){return o[e]}}}])}(),function(){var e=angular.module("Order",[]);e.factory("orderGenerator",function(){var e=function(e){var e=e,t=0,o={};return{getContent:function(){return o},getCount:function(){return o.length},addFood:function(n){var r,a={food:n.food,quantity:n.quantity,note:n.note||void 0};a.note?o[n.food.name+n.note]=a:(r=this.getQuantity(n.food),r&&(a.quantity=r+1),o[n.food.name]=a),t+=n.quantity*n.food.price,e.busy=!0},reduceFood:function(e){var t=o[e.name]?!0:!1,n=o[e.name].quantity;t&&0!==n&&(o[e.name].quantity-=1)},removeItem:function(e){t-=e.quantity*e.food.price,delete o[e.food.name]},getQuantity:function(e){return o[e.name]?o[e.name].quantity:void 0}}};return{createOrder:function(t){return new e(t)}}})}(),function(){var e=angular.module("Restaurant",[]);e.factory("restaurant",function(){for(var e=[],t=0,o=0;3>o;o+=1){var n={};n.id=o,n.tables=[];for(var r=0;5>r;r+=1)n.tables.push({id:t++});e.push(n)}return{getRooms:function(){return e},getTables:function(t){var o=e.indexOf(t);return-1!=o?e[o].tables:void 0}}})}(),function(){angular.module("Services",["Waiter","Restaurant","Menu"])}(),function(){var e=angular.module("Waiter",["Order"]);e.factory("waiter",["orderGenerator",function(e){var t=[];return{createOrder:function(o){var n=e.createOrder(o);return t.push(n),n},deleteOrder:function(e){var o=t.indexOf(e);t.splice(o,1)},sendOrder:function(e){var t=e.getContent();console.log("foods: ",e.getCount()),console.log("list of foods: ",t)}}}])}();